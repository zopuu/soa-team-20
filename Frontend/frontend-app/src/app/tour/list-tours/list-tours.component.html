<div class="list-wrapper">
  <h2 *ngIf="userId; else allTitle">Tours by user {{ userId }}</h2>
  <ng-template #allTitle><h2>All Tours</h2></ng-template>

  <div class="state" *ngIf="loading">Loading…</div>
  <div class="state error" *ngIf="error">{{ error }}</div>

  <div class="tour-list" *ngIf="!loading && !error">
    <div class="tour-card" *ngFor="let t of tours; trackBy: trackById">
      <h3 class="title">{{ t.title || t.name }}</h3>
      <p class="desc">{{ t.description }}</p>

      <div class="meta">
        <span> • Difficulty: {{ difficultyLabel(t.difficulty) }}</span>
        <span> • Status: {{ statusLabel(t.status) }}</span>
        <span> • Price: {{ t.price | currency }}</span>
        <span> • by {{ t.authorId || t.userId || t.author }}</span>
      </div>

      <div class="tags" *ngIf="t.tags?.length">
        <span *ngFor="let tag of t.tags; let i = index"
          >{{ tag
          }}<ng-container *ngIf="i < t.tags.length - 1"> · </ng-container></span
        >
      </div>

      <div
        *ngIf="isMyTours"
        class="card-actions"
        style="margin-top: 8px; display: flex; gap: 8px"
      >
        <button type="button" (click)="goToCreateKeypoint(t.id)" class="small">
          Add Key Point
        </button>
        <button
          type="button"
          (click)="confirmDelete(t.id)"
          class="small danger"
        >
          Delete
        </button>
      </div>
    </div>

    <div *ngIf="tours.length === 0" class="state">No tours found.</div>
  </div>
</div>
